configVersion: 1
project: 'python-service'
---
image: service
from: python:3.10-alpine
docker:
  WORKDIR: /app
  ENTRYPOINT: uvicorn
  CMD: [ "main:app", "--reload" , "--host", "0.0.0.0"]
git:
  - add: /
    to: /app
    stageDependencies:
      setup:
        - "**/*"
shell:
  setup:
    - apk update && apk add --no-cache gcc libc-dev make
    - pip3 install --no-cache -r /app/requirements.txt